section.hero
  = form_tag root_path, class: "search_bar", method: :get do
    .field.has-addons.has-addons-centered
      .control.is-expanded 
        = text_field_tag 'search', params[:search], class:"input", placeholder: "Rechercher un restaurant"
      .control.select.is-multiple.is-primary
        = select_tag "price", "<option selected=\"selected\">€</option><option>€€</option><option>€€€</option>".html_safe, multiple: true, class: 'is-medium'                     
      .control.select.is-multiple.is-primary
        = select_tag "cooking_style", options_from_collection_for_select(@tags, 'name', 'name', params[:cooking_style]), multiple: true, class: 'is-medium'
        = submit_tag "Rechercher", class: "button is-primary search"

  #map

  .container.is-fluid.mr-tp-20
    .columns.is-mobile.is-multiline.is-centered
      - @restaurants.each do |restaurant|
        = render restaurant

scss: 
  .search{
    margin-left: -3px;
    margin-top: -1px;
  }
  #map { top:0; bottom:0; width:100%; height: 600px; }
  .search_bar {
    position: absolute;
    top: 8%;
    z-index: 1;
    width: 60%;
    left: 20%;
  }
  .mr-tp-20{
    margin-top: 20px;
  }

javascript:
  $(document).ready(function() {
    $('.is-medium').select2();
  });

  mapboxgl.accessToken = 'pk.eyJ1IjoiY29taWNvbWVkaW5vIiwiYSI6ImNqcTUyZGRuaTF1ZW40M3RkdHphbDJpdjgifQ.s5NApfzcMq2rBFgdRhmQvg';
  var map = new mapboxgl.Map({
      container: 'map', // container id
      style: 'mapbox://styles/mapbox/streets-v9', // stylesheet location
      center: [2.3522608000000673, 48.8767204], // starting position [lng, lat]
      zoom: 16 // starting zoom
  });
  map.on('load', function() {
    map.loadImage('https://cdn0.iconfinder.com/data/icons/landmark-glyph/484/castle_japan-512.png', function(error, image) {
        if (error) throw error;
        map.addImage('wizcastle', image);
        map.addLayer({
            "id": "points",
            "type": "symbol",
            "source": {
                "type": "geojson",
                "data": {
                    "type": "FeatureCollection",
                    "features": [{
                        "type": "Feature",
                        "geometry": {
                            "type": "Point",
                            "coordinates": [2.3522608000000673, 48.8767204]
                        }
                    }]
                }
            },
            "layout": {
                "icon-image": "wizcastle",
                "icon-size": 0.1
            }
        });
    });
  });